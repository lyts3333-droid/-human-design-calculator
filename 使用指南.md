# 人類圖計算器 - 使用指南

## 📋 系統需求

- Python 3.7 或更高版本
- 網路連接（首次安裝依賴時需要）

## 🔧 步驟 1：安裝 Python 依賴

打開命令提示符（PowerShell 或 CMD），進入「人類圖」資料夾，然後執行：

```bash
cd 人類圖
pip install -r requirements.txt
```

這會自動安裝以下依賴：
- Flask（Web 伺服器）
- flask-cors（跨域支援）
- pytz（時區轉換）
- pyswisseph（天文計算）

**注意：** 如果您的系統還沒有安裝 `pyswisseph`，可能需要額外步驟。如果安裝失敗，系統會自動回退到模擬數據。

## 🚀 步驟 2：啟動伺服器

在命令提示符中執行：

```bash
python app.py
```

您應該會看到類似以下的訊息：

```
============================================================
人類圖計算器 API 伺服器
============================================================

伺服器正在啟動...
訪問地址: http://localhost:5000

API 端點:
  GET  /          - 前端頁面
  POST /calculate_hd - 計算人類圖數據
  GET  /health    - 健康檢查

* Running on http://127.0.0.1:5000
* Debugger is active!
```

**重要：** 保持這個命令提示符窗口開啟，不要關閉它。

## 🌐 步驟 3：在瀏覽器中訪問

打開您的網頁瀏覽器（Chrome、Firefox、Edge 等），訪問：

```
http://localhost:5000
```

或者：

```
http://127.0.0.1:5000
```

## 📝 步驟 4：使用計算器

1. **輸入出生資料：**
   - 年份（例如：1990）
   - 月份（例如：5）
   - 日期（例如：15）
   - 時間（例如：14:30，使用 24 小時制）

2. **可選參數：**
   - 時區（例如：`Asia/Taipei`、`America/New_York`）
     - 如果不提供，系統會根據經度自動估算
   - 經度（例如：121.5，表示東經 121.5 度）
   - 緯度（例如：25.0，表示北緯 25 度）

3. **點擊「計算人類圖」按鈕**

4. **查看結果：**
   - 人類圖類型（Type）
   - 人生策略（Strategy）
   - 內在權威（Inner Authority）
   - 意識層（Personality）行星列表
   - 設計層（Design）行星列表

## 🛑 停止伺服器

在命令提示符窗口中按 `Ctrl + C` 停止伺服器。

## ❓ 常見問題

### Q1：無法連接到伺服器

**解決方法：**
- 確認伺服器正在運行（命令提示符窗口應該顯示 "Running on http://127.0.0.1:5000"）
- 確認瀏覽器訪問的是 `http://localhost:5000`，而不是直接打開 HTML 檔案
- 檢查防火牆是否阻擋了 5000 端口

### Q2：ModuleNotFoundError

**解決方法：**
```bash
pip install -r requirements.txt
```

### Q3：端口已被占用

**解決方法：**
如果 5000 端口被其他程序占用，可以修改 `app.py` 最後一行的端口號：
```python
app.run(debug=True, host='0.0.0.0', port=5001)  # 改為其他端口
```
然後訪問 `http://localhost:5001`

### Q4：pyswisseph 安裝失敗

**說明：**
如果 `pyswisseph` 安裝失敗，系統會自動使用模擬數據。功能仍然可以使用，但計算結果可能不如真實天文計算精確。

## 📁 檔案結構

```
人類圖/
├── app.py                          # Flask 後端伺服器
├── index.html                      # 前端網頁
├── requirements.txt                # Python 依賴列表
├── test_precision_corrections.py   # 精度測試腳本
├── 使用指南.md                     # 本檔案
└── ... (其他檔案)
```

## 🔍 測試安裝

如果想測試安裝是否正確，可以運行：

```bash
python test_precision_corrections.py
```

如果所有測試通過，您會看到「所有測試通過！」的訊息。

## 📞 需要幫助？

如果遇到問題，請檢查：
1. Python 版本是否為 3.7 或更高
2. 所有依賴是否已正確安裝
3. 伺服器是否正在運行
4. 瀏覽器是否訪問正確的網址













